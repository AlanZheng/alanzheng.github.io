<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>Alan's Page</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="Description" lang="en" content="Alan's Page">
		<meta name="author" content="AlanZheng">
		<meta name="robots" content="index, follow">

		<!-- icons -->
		<link rel="apple-touch-icon" href="/img/apple-touch-icon.png">
		<link rel="shortcut icon" href="/favicon.ico">

		<!-- Override CSS file - add your own CSS rules -->
        <link rel="stylesheet" href="/css/editormd_style.css" />
        <link rel="stylesheet" href="/css/editormd.min.css" />
        <link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css">
		<link rel="stylesheet" href="/css/styles.css">
        
        <script type= "text/javascript" src="/js/jquery.min.js"></script>
        <script type= "text/javascript" src="/js/editormd.min.js"></script>
        <script type= "text/javascript" src="/js/md5.min.js"></script>
        <script type= "text/javascript" src="/js/steem.min.js"></script>
        <script type= "text/javascript" src="/js/page.js"></script>
        
        <style>
        label { height: 25px; width:10%; }
        input { height: 25px; width: 40%; }
        #author { height: 25px; width: 30%; }
        button { 
            height: 30px; width: 10%;
        }
        </style>
	</head>
	<body>
    
        <div class="main">
        <script>
        $(document).ready(function(){
            $(".main").load("/mainbar.html");
        });
        </script>
        </div>
    
        <div class="sidebar">
        <script>
        $(document).ready(function(){
            $(".sidebar").load("/sidebar.html");
        });
        </script>
        </div>
        
        <div id="contents">
        
        <label>Title: </label><input type="text" id="title" value="">
        <label>tags: </label><input type="text" id="tags" value=""><br>
        <label>Author: </label><input type="text" id="author" value="">
        <label>Wif: </label><input type="text" id="wif" value="">
        <button id="post">Post</button>
        
        <div id="test-editormd">
                <textarea id="textbox" style="display:none;"></textarea>
        </div>
        
        <label>File name: </label><input type="text" id="filename" value="">
        <button id="save">Save to local</button>

        <script>
var today=(new Date).toISOString().split("T")[0]
document.getElementById("filename").value=today+"-unnamed.md"
var testEditor
$(function(){testEditor=editormd("test-editormd",{width:"100%",height:"500",watch:!1,path:"/js/lib/",toolbarIcons:function(){return["undo","redo","|","h1","h2","h3","h4","h5","h6","|","bold","del","italic","ucwords","uppercase","lowercase","|","hr","quote","code","code-block","table","list-ul","list-ol","|","datetime","pagebreak","||","watch","fullscreen","preview"]}})}),function(){var e=null,t=function(t){var n=new Blob([t],{type:"text/plain"})
return null!==e&&window.URL.revokeObjectURL(e),e=window.URL.createObjectURL(n)},n=document.getElementById("save"),o=document.getElementById("textbox")
n.addEventListener("click",function(){var e=document.createElement("a"),n=document.getElementById("filename").value
e.setAttribute("download",n),e.href=t(o.value),document.body.appendChild(e),window.requestAnimationFrame(function(){var t=new MouseEvent("click")
e.dispatchEvent(t),document.body.removeChild(e)})},!1)}(),$(document).ready(function(){steem.api.setWebSocket("wss://steemd.steemitstage.com"),$("#post").click(function(){var e=md5($("#title").val()),t=$("#author").val(),n=$("#tags").val().split(" "),o=n[0],a=$("#title").val(),i=$("#textbox").val(),d=$("#wif").val()
steem.broadcast.comment(d,"",o,t,e,a,i,{tags:[n[1],n[2],n[3],n[4]]},function(e,t){e?alert(JSON.stringify(e,void 0,2)):alert(JSON.stringify(t,void 0,2))})})})
        </script>

        </div>
        
	</body>
</html>