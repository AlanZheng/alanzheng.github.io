<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>Alan's Page</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="Description" lang="en" content="Alan's Page">
		<meta name="author" content="AlanZheng">
		<meta name="robots" content="index, follow">

		<!-- icons -->
		<link rel="apple-touch-icon" href="/img/apple-touch-icon.png">
		<link rel="shortcut icon" href="/favicon.ico">

		<!-- Override CSS file - add your own CSS rules -->
        <link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css">
		<link rel="stylesheet" href="/css/styles.css">
        
        <script src="/js/jquery.min.js"></script>
        <script src="/js/steem.min.js"></script>
        <script src="/js/plotly.min.js"></script>
        <script src="/js/page.js"></script>
        
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=UA-8534265-3"></script>
        <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'UA-8534265-3');
        </script>
        
        <!-- google adsense code -->
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-2908538764657933",
            enable_page_level_ads: true
          });
        </script>
        
        <style>
        label { height: 25px; width:10%; }
        input { height: 25px; width: 20%; }
        button { 
            height: 30px; width: 20%;
        }
        </style>
        
	</head>
	<body>
    
        <div class="main">
        <script>
        $(document).ready(function(){
            $(".main").load("/mainbar.html");
        });
        </script>
        </div>
    
        <div class="sidebar">
        <script>
        $(document).ready(function(){
            $(".sidebar").load("/sidebar.html");
        });
        </script>
        </div>
        
        <div id="contents">
        
        <p align="center">
            Usage: <br/>
            [Name] : The steemit name you will check.<br/>
            [Post Count] : How many post do you want to check.<br/>
            Follow/Upvote me : <a href="https://steemit.com/@alanzheng">https://steemit.com/@alanzheng</a>
        </p>
        <div align="center">
            <label>Name: </label><input type="text" id="user" value="alanzheng">
            <label>Post Count: </label><input type="number" id="nb" value=1>
            <button type="submit" id="fetch">Who upvote Me</button><br/>
        </div>
        <div id="counter"></div>
        <script>
            function CalcUpVoted(){whoUpvotedMe(document.getElementById("user").value)}function whoUpvotedMe(e){return steem.api.getDiscussionsByAuthorBeforeDate(e,"",(new Date).toISOString().split(".")[0],document.getElementById("nb").value,function(e,t){return countUpvoters(getAllUpvoters(t))})}function getUpvoters(e){return e.active_votes.map(function(e){return e.voter})}function getAllUpvoters(e){return e.reduce(function(e,t){var o=getUpvoters(t)
return e.concat(o)},[])}function countUpvoters(e){var t=e.reduce(function(e,t){return e[t]=(e[t]||0)+1,e},{}),o=[],n=[]
for(var r in t){var s='<a href = "https://steemit.com/@'+r+'" target=_blank>'+r+"</a>"
o.push(s),n.push(t[r])}var u={x:o,y:n,mode:"lines+markers",type:"scatter"},a=[u],i={title:"The steemitians who upvoted you",displayLogo:!1,showlegend:!1},c={displayLogo:!1,scrollZoom:!0,showLink:!1,modeBarButtonsToRemove:["sendDataToCloud"],displayModeBar:!0}
return Plotly.newPlot("counter",a,i,c),t}steem.api.setOptions({url:"https://api.steemit.com"}),document.getElementById("fetch").addEventListener("click",CalcUpVoted)
        </script>

        </div>
        
	</body>
</html>